<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>科学生活</title><link>/</link><description>做什么都得走点技术流</description><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>${static_prefix}icon.png</url><title>科学生活</title><link>/</link></image><language>zh-CN</language><lastBuildDate>Thu, 24 Dec 2020 15:31:07 +0806</lastBuildDate><pubDate>Thu, 24 Dec 2020 15:31:07 +0806</pubDate><item><title>Hello World!</title><link>/archives/first-post/</link><description>&lt;p&gt;暂时不知道要写什么。&lt;/p&gt;
&lt;p&gt;&lt;figure class="pswp-item" style="flex: 172.78617710583154" data-width="1600" data-height="463"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/cca364b0ddfd077d980613e7afc53f60.jpg" alt="hello" /&gt;&lt;figcaption&gt;hello&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
</description><author>sfl05@163.com (ste)</author><guid isPermaLink="true">/archives/first-post/</guid><pubDate>Wed, 25 Dec 2019 11:50:00 +0806</pubDate></item><item><title>科学上网</title><link>/archives/internet/</link><description>&lt;p&gt;我的智商极限大约就是折腾上网了。&lt;/p&gt;
&lt;p&gt;小时候家里没有电脑，跑去表哥家里玩游戏，那时候是拨号上网，联网之后电话就打不进来了，所以妈妈叫我回家吃饭却打不通电话，只能干着急。&lt;/p&gt;
&lt;p&gt;后来自己家里也买了电脑，每次开机都要先拨号，总要等好一会儿才行，经朋友指点买了一个路由器，记得是水星的，纯路由器，无wifi。在路由器上进行拨号，比电脑上来得更快。虽然只是进后台填个宽带账号的事情，还是研究了半天。搞明白之后，还跑去小姑娘家里帮人设置，弄好之后我就很老实地回家了。&lt;/p&gt;
&lt;p&gt;读大学的时候知道有wifi这种东西，但并没有什么wifi设备，笔记本电脑也是连网线用的，那个时候也不觉得不方便。等到读研究生的时候，移动设备开始依赖wifi了，但学校里上网需要锐捷认证，很蛋疼。看到网上有人说可以把路由器刷ddwrt/openwrt并跑锐捷认证，但是完全搞不懂，最后只能在电脑上插个360wifi来解决，给iPad之类的设备提供无线。后来学校把这类wifi硬件都封了，必须用修改版的锐捷才能正常运行，很难受。最后找导师要了他的Teacher帐号，可以在全校范围内wifi直连外网，感叹技术不如关系好用。&lt;/p&gt;
&lt;p&gt;到这个时期为止，还是一名纯小白。&lt;/p&gt;
&lt;h2&gt;折腾的开始&lt;/h2&gt;
&lt;p&gt;工作后自己租房子住，在淘宝上买了台刷好PandoraBox的小米路由mini，为的是在路由上实现透明代理。买了之后发现这货操作反人类，费了很大劲才设置好拨号，而且不怎稳定，用了一段时间就闲置了。
&lt;figure class="pswp-item" style="flex: 88.75739644970415" data-width="600" data-height="338"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/4173de09e2ea87eed378525213fdb857.jpg" alt="mini" /&gt;&lt;figcaption&gt;mini&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;作为米粉的我又买了大号的小米路由硬盘版，用起来也一般，但好处是能远程下载电影以及自动追美剧，同时学会用samba实现在电视上看路由器里电影。顺带了解了NAS这种东西，研究了一下群晖、Gen8之类的产品，以及HyperV、ESXi之类虚拟技术。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="800" data-height="600"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/a6d45a850fe365b2da1e090220c5bfd8.jpg" alt="r2d" /&gt;&lt;figcaption&gt;r2d&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;自己买不起群晖，就忽悠单位买了群晖，主要用于企业数据备份和共享，8盘位，raid 5。一开始用QuickConnect来远程访问，很方便但速度不理想。为了能够相对快速地实现远程访问，专门研究了一下ddns，搞了个花生壳的动态域名。然而这其实挺傻的，因为单位的专线其实有公网固定IP。这是后话，不表。&lt;/p&gt;
&lt;p&gt;大号小号的小米路由器都不好用，自己又跟风买了Newifi mini，刷完breed后再刷各种固件极为方便。试了一圈发现老毛子固件真好用，相较openwrt直观太多。在路由上设置好酸酸后，所有终端免翻，真是居家越货必备良品。同时可以设置adbyby、KMS等功能，十分强大。顺便在阿里买了个域名，用aliddns可以实现远程访问。
&lt;figure class="pswp-item" style="flex: 75.10288065843622" data-width="730" data-height="486"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/2b1102bbe11d865d774ba94332fa4312.jpg" alt="Newifi" /&gt;&lt;figcaption&gt;Newifi&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Newifi用起来各种好，然后开始到处安利，并囤积居奇，买了一打放在家里，送给有需要的朋友。期间上门给导师装了一台，设置好酸酸和去广告，导师表示对其科研有很大帮助，并表示要给我介绍女朋友。后来又我开始买已经下车了的K2/K2P，刷好荒野无灯的固件并配置好搬瓦工的酸酸线路送朋友，到手插网线就能用。但因为不可描述的原因，往往用不了太久，我也很难上门去维护，后来便放弃了。几年后发现K2P成了神器，二手市场价格越炒越高，主要是本身硬件靠谱且有各方大神的写的固件，确实好用。
&lt;figure class="pswp-item" style="flex: 75.87859424920129" data-width="950" data-height="626"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/1546e9ebce437b1770d51356c3cc9436.png" alt="荒野无灯" /&gt;&lt;figcaption&gt;荒野无灯&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;看了网上的放毒文，又买了Asus ac66u b1，刷梅林，感觉上网快了好多。梅林固件有个插件中心，按需安装，独立更新，用起来更方便。这货的最大问题是温度常年70度往上，我经常用它来温一下过于冰的可乐。后来专门给它配了个USB风扇，温度降到50度左右。
&lt;figure class="pswp-item" style="flex: 37.8316906747536" data-width="1996" data-height="2638"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/a718830c0d818c26831b4e1f24e83902.jpg" alt="梅林" /&gt;&lt;figcaption&gt;梅林&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;顺手把单位里的R8000也刷了梅林，在全所范围内实现酸酸、kms和去广告，自己方便，别人也方便。配合AP，全面覆盖，无缝漫游。有一次内部开会，有个同事说因为在单位可以上Google，查资料方便，所以很愿意加班。老板听了很满意，频频冲我点头，但并没有给我加工资。&lt;/p&gt;
&lt;p&gt;最新的梅林固件开始支持AiMesh，于是我又买了一台66u b1，两台共同组AiMesh，有线回程，效果一般。然而某天我突然发现自己其实根本不需要无缝漫游，因为家里实在小，一台K2P完全可以覆盖了，而且发热量还小。遂撤掉两台华硕，收进车库里吃灰。
&lt;figure class="pswp-item" style="flex: 78.73626373626374" data-width="1433" data-height="910"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/0383690c69315cfcf8c72ca7d0d73988.png" alt="Aimesh" /&gt;&lt;figcaption&gt;Aimesh&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;软硬之分&lt;/h2&gt;
&lt;p&gt;这时我发现科学上网的姿势日新月异，转眼间我已数次换了机场，换了跨栏方案，原本在K2P上刷的固件因为不支持混淆已无法用了，而且性能也跟不上了。于是在终端上想办法，ios用quantumalt，android用surfboard，win用clash，都可以策略组分流。其中clash是我最喜欢的，开源稳定，在PC上用cfw之后几乎再没出过不能上网的情况。
&lt;figure class="pswp-item" style="flex: 88.44339622641509" data-width="1500" data-height="848"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/1790c1de2e6ff98e0f9c674739f8a627.png" alt="clash for windows" /&gt;&lt;figcaption&gt;clash for windows&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;偶然了解到旁路方案，本想把一台闲置的MacBook装上surge当网关用，无奈surge太贵买不起。后来经某TG群安利买了一个orange pi zero plus，和我早年买的树莓派是一个道理，不过这个更小，而且是千兆口，CPU也更强。刷了群里老竭力编译的openwrt固件，支持订阅和故障转移，非常好用。把xbox网关指向Pi就可以实现翻墙，看Netflix速度很棒，和老婆在家看4K的纸牌屋，很开心。
&lt;figure class="pswp-item" style="flex: 68.62949452840022" data-width="2634" data-height="1919"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/8956bdf983a86a3f2d460f3595c9d227.jpg" alt="pi" /&gt;&lt;figcaption&gt;pi&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在Pi上装了clash及luci clash，由于尚处于测试阶段，有一些小毛病，不如终端上的版本稳定。新版本clash上开始引入fake-ip模式，但我并没有搞懂，大约就是防DNS污染的一种方法。不过旁路其实没必要跑openwrt，不如直接armbian跑clash并设置iptables转发规则到clash更为简洁，尤其是clash更新tun模式之后，理论上速度也更快。
&lt;figure class="pswp-item" style="flex: 50.0" data-width="2160" data-height="2160"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/e601716888ae03b2dcd2f51815022145.jpg" alt="luci-clash" /&gt;&lt;figcaption&gt;luci-clash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;搞定旁路由后，算是实现半软化。正好电信有免费提速到200M的优惠，就办理了，结果提速后家里测速还是只有100M，问了才知道精装修装的交换机是百兆的，真的垃圾。本想买个千兆交换机放弱电箱，后来转念买了台Newifi3，刷lean固件，拆了外壳后勉强可塞进弱电箱，发热量也还好。将Newifi作为主路由，关无线，挂酸酸乳；K2P使用AP模式，连WIFI；Pi专供Xbox，保证视频速度流畅。&lt;/p&gt;
&lt;p&gt;这套方案本身挺合理的，只是裸板放弱电箱还是不放心。某天出差，临时起意买了个四口的J1900软路由。到手后发现做工极好，被动散热效果很不错，夏天也仅40多度。而且大小适中，正好可以放进弱电箱，把新三给换下来。性能上，跑分可以跑三万多，看着就舒服，这才是真正的软路由。继续拿K2P作AP，除次卧信号略差之外，稳定又给力。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="4032" data-height="3024"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/e8a1ea7a124e9cf101350467be1dc2dd.jpg" alt="J1900" /&gt;&lt;figcaption&gt;J1900&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;J1900买来就是刷好了lean openwrt的成品软路由，用了一段时间下来十分稳定。不过人总是要折腾，不时想装装其它的软件包，但是我通过安装编译好的ipk包时总是会出现缺少依赖的情形。更彻底的办法是直接更新固件，但软路由要更新固件却很麻烦，尤其是我的软路由是放在弱电箱里，要拿出来特别麻烦。有一次尝试盲刷，然而固件的lan口与我原先的不一致，最终还是只能拿出来配置，十分蛋疼。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="1280" data-height="960"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/4c8d04bbb0965a9a951f0427891173c5.jpg" alt="打开弱电箱" /&gt;&lt;figcaption&gt;打开弱电箱&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;虚拟化安装是更科学的系统安装方式，但J1900这块CPU不支持网卡直通，故不考虑。打算以后有机会再换个软路由，比如3865U之类。网上看到还有一种思路是先PVE虚拟化后，跑一个Openwrt，再跑一个Linux定期pull最新源码并编译后自动更新Openwrt，这个操作太骚，学不来。&lt;/p&gt;
&lt;p&gt;某次心血来潮翻出早年买的一个小黄路由——GL MT300N V2，在吃灰多年后，经更新固件终于可以支持华为4G网卡，插上即可上网。其固件本质为openwrt，套了个一定制的界面。然而并没有想到可用的场景，就当玩玩吧。
&lt;figure class="pswp-item" style="flex: 70.91503267973856" data-width="1302" data-height="918"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/3b2b2494f147d31f0ce0f2892e551c15.jpg" alt="随身路由" /&gt;&lt;figcaption&gt;随身路由&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;远程访问&lt;/h2&gt;
&lt;p&gt;老竭力的Argon主题真好看，时不时打开路由管理界面看看。为了能远程看到家里的网络情况，打电话给电信改了桥接，然后用主路由PPPOE拨号，并在阿里云买了一个域名，用于ddns。这个操作看起来并没有什么卵用，但实际上打开了一扇大门。&lt;/p&gt;
&lt;p&gt;实现远程访问后，在家里搞了一台蜗牛星际跑黑群（矿渣真香）。用cloudsync来下载百度盘和Google Drive上的资源（cloudsync真是神器）。
&lt;figure class="pswp-item" style="flex: 85.25316455696202" data-width="1347" data-height="790"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/d8a8cd4baba0839e9fd904498071dfc7.jpg" alt="cloudsync" /&gt;&lt;figcaption&gt;cloudsync&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在群晖上跑docker也很不错，跑了clash和&lt;a href="https://docs.ginuerzh.xyz/gost/"&gt;gost&lt;/a&gt;，后者是一个转发代理的工具，可以实现将连到这台nas的特定流量转发到clash，从而实现代理中转，有一定用处。
&lt;figure class="pswp-item" style="flex: 91.62790697674419" data-width="394" data-height="215"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/dd0f4c8b0003dc00623c77fd5d97d38e.png" alt="gost" /&gt;&lt;figcaption&gt;gost&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后搞了更的远程服务，包括下载、媒体库等，详见本站其它文章。&lt;/p&gt;
&lt;h2&gt;说说clash&lt;/h2&gt;
&lt;p&gt;最终还是说回clash。在2019年这一年里，眼看着clash这个开源软件一步步走向全平台（iOS除外），我现在电脑、手机、路由器、NAS都是用Clash了。再次感叹开源社区的强大，在Dreamacro写了Clash内核后，又有各路高手写了各平台的UI，各有特色，比如cfw/cfa都是很棒的软件。路由器上，openclash提供了便捷的配置调整功能，从而可以直接使用电脑/手机上的配置文件，略微调整下DNS等设置即可为路由器使用，很方便。
&lt;figure class="pswp-item" style="flex: 56.563545150501675" data-width="1353" data-height="1196"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/0ee8ed922f7c7eae664276dc757f8bc7.png" alt="openclash" /&gt;&lt;figcaption&gt;openclash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;除各平台UI程序外，因为clash配置相对复杂，又有人写了转换程序，可以把服务商的订阅转换成自己喜欢的配置并可以自动更新。我主要用来转普通订阅为node list，然后通过proxy-provider更新。
&lt;figure class="pswp-item" style="flex: 86.1557478368356" data-width="1394" data-height="809"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/a47519502a5de57d34c15c83b69d368d.png" alt="subconverter" /&gt;&lt;figcaption&gt;subconverter&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;此外，还有一个clash的web管理界面，我也很喜欢，方便查看实时网速、流量以及日志等。
&lt;figure class="pswp-item" style="flex: 88.15426997245179" data-width="1280" data-height="726"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/71755d754143251e958174a477de2e88.jpg" alt="clash-dashboard" /&gt;&lt;figcaption&gt;clash-dashboard&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;但开源社区也有一些不那么舒服的事情。今天碰巧看到一篇&lt;a href="https://github.com/JadaGates/ShadowsocksBio"&gt;文章&lt;/a&gt;，让人唏嘘不已。很多事情在clash上&lt;a href="https://github.com/JadaGates/ShadowsocksBio/issues/6"&gt;重演&lt;/a&gt;，历史总是惊人的相似。&lt;/p&gt;
&lt;p&gt;clash在2020年6月27日突然把版本号拉到1.0.0&lt;a href="https://github.com/Dreamacro/clash/releases/tag/v1.0.0"&gt;版本&lt;/a&gt;，这意味着开源时代的结束。此后clash将另开一个premium的闭源版本，支持rule-provider、tun、script等新功能。此举封死了clashr无脑抄代码的路子，但也堵死了开源合作的可能性，只剩为数不多的开发者参仍与其中。对于使用者而言，目前来看影响不大，clash的开源版本已经更新了proxy-provider这个重要功能，配合subconverter进行节点更新十分方便，未来小修小补可能还是会有更新的。我在服务器docker里跑了1.0.0版本，使用良好。&lt;/p&gt;
&lt;p&gt;7月22日，clash作者合并了关于支持酸酸乳协议的&lt;a href="https://github.com/Dreamacro/clash/pull/805"&gt;PR&lt;/a&gt;，另人纠结的clashr正式退出历史舞台。不过这个PR最终被cherry-pick到premium分支，提这个PR的作者不但水平很高，而且挺无私。&lt;/p&gt;
&lt;p&gt;我现在属于拿来主义，只会拿开源社区的东西来用；希望以后也有能力可以去提pr甚至自己写个有用的程序，也为开源社区作点贡献。&lt;/p&gt;
&lt;h2&gt;家用简化&lt;/h2&gt;
&lt;p&gt;传说中最小的软路由R2S出了官方金属壳，赶紧买了一个，手感真的好，和Orange Pi摆一起，像一对艺术品。相比之下J1900真是庞然大物，换了。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="1280" data-height="960"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/408e746e3cff69f5e00e6eaa3d957517.jpg" alt="R2S" /&gt;&lt;figcaption&gt;R2S&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;利用Github Action自动编译了固件，烧到TF卡也十分简单。这大约是最简单的软路由方案了吧。
&lt;figure class="pswp-item" style="flex: 65.26181353767561" data-width="1022" data-height="783"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/f6ad0bf5b1c52a0b64d8cd9084726491.png" alt="OP" /&gt;&lt;figcaption&gt;OP&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;AP方面，原本计划用Velop mesh ap，后来觉得实在是贵，消费降级，买了最便宜的水星mesh路由，两只的价格不到200，用起来效果也不错。参数上，wifi5略落后，2.5Ghz+5Ghz总共1200M的带宽也无法完全跑满千兆，TP的那款mesh路由其实更好，但我更想要白色的，好看些。这比当年用华硕的Aimesh强多了，回头看华硕的路由器实在是有些坑，但在那个时期人人奉为神器，人的局限性真的很大。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="1280" data-height="960"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/87f1ae7e5f78b82e7c2354afae02490e.jpg" alt="Mesh AP" /&gt;&lt;figcaption&gt;Mesh AP&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;基于以上经验，推荐一般家用（200M以上带宽且有网线布线的）可以考虑：R2S + 交换机 + &lt;a href="https://www.tp-link.com.cn/product_1368.html"&gt;TL-WDR7650&lt;/a&gt;的方案，500元以内的实惠选择。&lt;/p&gt;
&lt;h2&gt;进一步简化&lt;/h2&gt;
&lt;p&gt;使用下来Openwrt总体是稳的，但由于我手贱总会去升级下或者改个什么设置，最终导致出现问题，必须再次打开弱电箱处理。在第N次打开鞋柜里的弱电箱后，我终于放弃了折腾，决定进一步简化上网方案，改为普通路由器+旁路的方案。由于并不是家里所有设备都需要代理，个别设备指定旁路的网关的方式显得更为科学，对整体的影响最小。&lt;/p&gt;
&lt;p&gt;选了号称弱电箱神器的UBNT ER-X作为主路由，以小巧和稳定著称，确保以后再也不必打开弱电箱操作。这台机器到手后给我惊艳的感觉，真的只有巴掌大小。
&lt;figure class="pswp-item" style="flex: 68.96551724137932" data-width="960" data-height="696"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/3a0171589e2ea3d4639240d5084d14c3.jpg" alt="ERX" /&gt;&lt;figcaption&gt;ERX&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其复杂的功能界面让我研究了半天，而且这个机器竟然没有自带说明书，大约是太复杂以至于说明书印不下吧。最终都设置好了，但我其实并没有搞明白细节。
&lt;figure class="pswp-item" style="flex: 101.50537634408602" data-width="1888" data-height="930"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/be342f92f784c2db6ef5888e1766b878.png" alt="ubnt" /&gt;&lt;figcaption&gt;ubnt&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;另外，这个路由器管理APP的UI非常小清新，我总会时不时打开看一眼。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="1280" data-height="960"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/1411e10d7f9ad07cf402c9ef52de51d5.jpg" alt="UNMS" /&gt;&lt;figcaption&gt;UNMS&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后用N1跑了小钢炮系统，并虚拟出一个Openwrt，同时作为PT下载机和旁路由使用，性价比极高。用docker的方式安装op，确实很方便，更新固件只需要pull一下最新镜像，远程配置一下即可，而不必去动机器本身。
&lt;figure class="pswp-item" style="flex: 58.05714285714286" data-width="1016" data-height="875"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/60448a53ed36ea029f3fea60a955c4d1.png" alt="N1 OP" /&gt;&lt;figcaption&gt;N1 OP&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;家里原先的J1900准备卖了，R2S则拿到单位用。R2S虽然温度并不高，夏天也就50度出头，但出于好玩，给它上了一个散热，同时当底座用。风扇无法取电，所以还是被动散热，大约降七八度的样子。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="1280" data-height="960"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/db1bd66c5987505355b8c9f8ac411713.jpg" alt="散热底座" /&gt;&lt;figcaption&gt;散热底座&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;结语&lt;/h2&gt;
&lt;p&gt;我感叹网络技术真是深不见底，越到底层我越搞不懂，这大约是我智商的极限了，如果有空我得去读一读TCP/IP，了解一下底层原理。不过这种软硬结合的玩法真的有趣，我已然将其视为一种乐趣，而超过实现科学上网功能这一初衷。&lt;/p&gt;
&lt;p&gt;这一感觉和网友&lt;a href="https://twitter.com/i/web/status/1126165698978271232"&gt;@cxiaoji&lt;/a&gt;说的很像：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;我对数据结构有非常美好的回忆。我真正开始理解编程就是在贵系蹭的数据结构课。老师没打开过教材，上课就一个编辑器，从头写一个类，一边讲一边往里面添方法。讲完编译，测试，通过，正好下课。我期末要熬图根本没工夫复习的，但是这门课学的东西一点都没忘。&lt;/p&gt;
&lt;/blockquote&gt;
</description><author>sfl05@163.com (ste)</author><guid isPermaLink="true">/archives/internet/</guid><pubDate>Wed, 25 Dec 2019 14:26:00 +0806</pubDate></item><item><title>科学阅读</title><link>/archives/reading/</link><description>&lt;p&gt;看书这个事情也要讲究科学性，我对于科学性的追求，一开始都关注在设备上，先后买过Nook、Kindle以及iPad Pro等，但每一样其实都看得不多。&lt;/p&gt;
&lt;p&gt;但我还是给自己找了很多买设备的理由，比如买KPW时，是因为看到各种评测、晒物的帖子里都有它的身影，自己不买个都不好意思和人打招呼。结果买来终于明白为什么它出镜率这么高，因为用来当背景真的挺好看的。
&lt;figure class="pswp-item" style="flex: 66.67956656346749" data-width="1723" data-height="1292"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/e8c87b4d1ae514495af4d64dc6d8f9bd.jpg" alt="Kindle Paperwhite 3" /&gt;&lt;figcaption&gt;Kindle Paperwhite 3&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;后来又买iPad Pro和Apple pencil，是因为可以全尺寸看PDF，并方便批注。不过iPad即便是Pro也还是逃不出“买前生产力，买后爱奇艺”的命运。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="2048" data-height="1536"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/a72a954a88708c55238b776252921c0d.jpg" alt="iPad Pro看经济学人" /&gt;&lt;figcaption&gt;iPad Pro看经济学人&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;回想起来反而是我大学时买的一台Palm TX，陪我看完很多书，比如《近距离看美国》、《往事并不如烟》、《台北人》等。所以不要追求设备，随便弄台Kindle，随身方便就好。目前用的是KO2，盖泡面挺好。
&lt;figure class="pswp-item" style="flex: 50.0" data-width="1280" data-height="1280"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/f9ad001c15969389138f34ed91b2649d.jpg" alt="Kindle Oasis 2" /&gt;&lt;figcaption&gt;Kindle Oasis 2&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;看书的科学性也不在于看得快，各种快速阅读基本都是扯淡，理解才是核心。书中内容与认知高度一致的，自然就看得快。复杂的内容就要慢慢读，细细理解。有一本《如何阅读一本书》大约就是讲这个事情的，虽然我只是看了目录部分。
&lt;figure class="pswp-item" style="flex: 54.3359375" data-width="1391" data-height="1280"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/f73f79d56419d3d6ef8241c3893e979d.jpg" alt="盗一张图" /&gt;&lt;figcaption&gt;盗一张图&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;我现在最大的问题是长期不看书，这是不行的。主要原因还是时间碎片化，手机刷推、聊TG的时间很多，看书根本打不起精神。我打算从小说类读物开始重新培养阅读习惯，慢慢向非小说类读物引导，这也是一种科学阅读。为此，我专门建一个Notion的页面，分左右栏来注明自己读了多少小说及非小说类读物，同时笔记也一样写在里面。
&lt;figure class="pswp-item" style="flex: 44.34389140271493" data-width="784" data-height="884"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/0c26652ed7a0203264b9b1cd466bacff.png" alt="Notion" /&gt;&lt;figcaption&gt;Notion&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Notion同时也是非常好的笔记应用，可以添加各类Block，可以是说最为读书科学的笔记工具了。&lt;/p&gt;
&lt;p&gt;其它不多说了，具体看Notion上的&lt;a href="https://www.notion.so/a205f411cb604146b636e800999ccc7d"&gt;读书笔记&lt;/a&gt;吧。&lt;/p&gt;
</description><author>sfl05@163.com (ste)</author><guid isPermaLink="true">/archives/reading/</guid><pubDate>Thu, 26 Dec 2019 18:26:00 +0806</pubDate></item><item><title>科学看剧</title><link>/archives/movie/</link><description>&lt;p&gt;大约从大学起开始看美剧，跟风看老友记、越狱什么的，主要是从学校的ftp下载，或者从同学那里拷贝。后来有了Maze，下载更方便一些。后来发现别人看完都去考GRE出国了，都是带着目的去看美剧的，就我是在那儿瞎JB看。&lt;/p&gt;
&lt;p&gt;研究生阶段主要看冰与火、纸牌屋为主，同时开始看韩剧，城市猎人、星星的你之类。主要通过人人影视等渠道去下载，迅雷下到电脑上，几个室友一起看。&lt;/p&gt;
&lt;p&gt;毕业后买了一个小米电视盒子，以及一台小米路由硬盘版。这个路由可以自动追剧，喜欢的剧会自己下载下来，非常方便。然后用盒子可以直接SMB访问路由看，自动匹配字幕。非常给力。主要看了疑犯追踪，这剧太长了，追到后面实在有些累。&lt;/p&gt;
&lt;p&gt;后来整体升级了一下，买了sony电视，买了Netflix会员及原生线路，买了Xbox（有NF支持），以及Sonos 5.1 全家桶。这么大的投入效果确实非常好。不过工作也忙，很少有时间看，一般只能看短剧，比如碳变、爱死机、黑镜之类。有段时间老婆回娘家，我一口气看完三季《怪奇物语》，非常痛快。由于音效过于逼真，此片又过于cult，看的时候吓得不轻。&lt;/p&gt;
&lt;p&gt;赶上黑五的时候又买了Firestick 4K，接房间的小米电视，十分小巧可以藏在电视背后，从正面完全看不出来。而且这货可以用Alexa来控制，装逼效果一流，实际没啥用处。不过我慢慢失去耐心，一般剧都看不过三集。&lt;/p&gt;
&lt;p&gt;Netflix虽好，但上面还是有很多片子是没有的，所以有时还是需要本地片源，原先用的小米路由器硬盘版太弱，便上了群晖。群晖上cloudsync堪称下载神器，可以以同步的方案下载百度盘、Google Drive上的资源，这俩是目前最主流的资源分享渠道了。对于种子或是磁力，也可以通过其自带的Download Station来下载或是用Docker跑个aria2，速度一般。
&lt;figure class="pswp-item" style="flex: 85.25316455696202" data-width="1347" data-height="790"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/d8a8cd4baba0839e9fd904498071dfc7.jpg" alt="CloudSync" /&gt;&lt;figcaption&gt;CloudSync&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后为更流畅地看本地4K片源，又买了一个N1，刷CoreELEC（kodi变体），观影效果很棒。
&lt;figure class="pswp-item" style="flex: 74.94646680942184" data-width="1400" data-height="934"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/f786edae1f83133e063d413cad09d443.jpg" alt="N1" /&gt;&lt;figcaption&gt;N1&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;因为我这台N1没有配遥控器，但按理可以CEC解决，但不知为何一直不成功。后来查到一篇&lt;a href="https://post.smzdm.com/p/738281/"&gt;文章&lt;/a&gt;才知道导致hdmi cec失效的元凶原来是电信的机顶盒，真是万万没想到。于是拆了一个头并且剪了一根线，解决了这个问题。
&lt;figure class="pswp-item" style="flex: 37.5" data-width="3024" data-height="4032"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/f4a712d1333567c1e417134fc13350dd.jpg" alt="HDMI" /&gt;&lt;figcaption&gt;HDMI&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不过老婆嫌NAS太吵，家里太小没办法只能搬去单位，SMB方式变得不可行，改用webdav。后来偶然了解到还有Plex这样的神器，可以远程流媒体传输。群晖上有现成的套件就直接跑了一个，也很简单。我最喜欢Plex之处在于任意设备直接播放，并且保存播放记录多设备同步，相当于自己跑了一个爱奇艺。此外，其自带的刮削器也很强，片子的信息基本都能正确地抓到，效果如图：&lt;/p&gt;
&lt;p&gt;&lt;figure class="pswp-item" style="flex: 89.0125173852573" data-width="1280" data-height="719"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/5408edcfb3afc7f653beb687bde3b4d9.jpg" alt="电影" /&gt;&lt;figcaption&gt;电影&lt;/figcaption&gt;&lt;/figure&gt;
&lt;figure class="pswp-item" style="flex: 89.0125173852573" data-width="1280" data-height="719"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/cb3dda4050240c0899872679b38556d6.jpg" alt="剧集" /&gt;&lt;figcaption&gt;剧集&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这是我当年很喜欢的美剧《冰血暴》，存在NAS上，偶尔看看介绍也是蛮好的。
&lt;figure class="pswp-item" style="flex: 57.091882247992864" data-width="1280" data-height="1121"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/c889715cf601bbc35cd9a143be5ee4e7.jpg" alt="Fargo" /&gt;&lt;figcaption&gt;Fargo&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不过慢慢发现Plex实时转码是很吃CPU的，J1900这块CPU的性能根本吃不住，瞬间跑满。网上建议改为串流，终端解码，于是在电视上装了Kodi，然后再装Plex插件，但实际操作时要先进入Kodi再从插件中启动Plex插件，类似app套娃，体验不佳。进一步了解到Jellyfin插件，与Kodi结合更深，将影片信息直接同步到Kodi里，打开Kodi就是影片墙了。
&lt;figure class="pswp-item" style="flex: 81.84143222506394" data-width="1280" data-height="782"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/858a3bd6c4c329686b0b9307f9904bb3.jpg" alt="电视上的效果" /&gt;&lt;figcaption&gt;电视上的效果&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;试着放了一下4k的片子，确实更流畅，而且群晖CPU并没有显著变化。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="1280" data-height="960"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/ecd01f17a2abf1208186995698b00e2f.jpg" alt="4K" /&gt;&lt;figcaption&gt;4K&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Jellyfin作为开源免费软件，功能上并不输Plex，我更喜欢Jellyfin的一点是它不需要像Plex那样要过Plex服务器认证后才能连接，直接远程连接到自己服务器即可，更为自主可靠。另外，一些细节设置也更为人性化，比如在手动识别媒体信息时能直接显示匹配的片名及图片，选择起来更直观。此外，Jellyfin支持硬解，我试了在配置硬解后网页直接播放，CPU降至50%左右，还是勉强，不如终端解码。
&lt;figure class="pswp-item" style="flex: 99.84177215189874" data-width="631" data-height="316"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/ecf4167bffd940fca042f1484ff6dcf0.png" alt="硬解" /&gt;&lt;figcaption&gt;硬解&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Jellyfin+Kodi的方案，相当于就是把Jellyfin作为影片管理器来用了，其刮削器匹配的影片信息，准确度也很高。此外，通过插件下载字幕，也十分方便。
&lt;figure class="pswp-item" style="flex: 67.5054704595186" data-width="1234" data-height="914"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/799fc13089c728359082ede0d495a3b0.png" alt="字幕" /&gt;&lt;figcaption&gt;字幕&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不过如果特别有钱的话，Plex+Infuse Pro体验会更好些，同样是Plex作为影片管理器，Infuse作为播放器，UI很舒服，操作也很人性化。通过Apple TV来播放，应该算是最佳方案了。
&lt;figure class="pswp-item" style="flex: 66.7361835245047" data-width="1280" data-height="959"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/191a649a3dff4867649f81f9c2d6c51f.jpg" alt="Infuse on iPad Pro" /&gt;&lt;figcaption&gt;Infuse on iPad Pro&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不过我还是继续用平民方案，对于客厅的Sony电视直接在电视机上装Kodi，性能够用；对于房间的小米电视，性能略差，直接装Kodi有时会卡。因此，还是选择用N1刷CoreELEC后装Jellyfin看。买了一根usb转dc的诱骗线，用小米电视的USB口供电并假装自己是12V从而成功带动N1，这样就免去再接一根电线的麻烦。同时因为有CEC支持，所以可以直接用小米遥控操作N1。N1完全隐在壁挂电视背后，非常完美，这个配合堪称最佳实践。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="1280" data-height="960"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/07c0745d187abf4ccd72f3b08c0450c5.jpg" alt="N1解码" /&gt;&lt;figcaption&gt;N1解码&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;十分喜欢N1这个小盒子，于是又买了个，刷了小钢炮系统用于下载，荒野无灯出品，找到了当年用他的老毛子路由器固件的感觉，十分简洁直观。
&lt;figure class="pswp-item" style="flex: 70.04189944134079" data-width="1003" data-height="716"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/10e498c2e3a32f4c1c738315a67ae922.png" alt="NDM" /&gt;&lt;figcaption&gt;NDM&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在N1上插个不用的移动硬盘，使用系统自带qBittorrent来下载些蓝光电影，本地观看，速度更快，也没什么噪音。
&lt;figure class="pswp-item" style="flex: 72.82303370786516" data-width="1037" data-height="712"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/7bd7a572458bc5e199adf23332b5a339.png" alt="qBit" /&gt;&lt;figcaption&gt;qBit&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然而折腾了那么多，看剧的时间是越来越少了，有点忧伤。为什么还要折腾，大约是一种情怀，有一位&lt;a href="https://twitter.com/piece/status/1230364853610483713"&gt;推友&lt;/a&gt;说的很符合我的心境：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;昨天花了很长时间折腾IPTV，想抛弃电视盒子在家随意观看，什么双线双拨，什么VLAN都尝试过，家里的网搞瘫两次，一直搞到今天凌晨三点也没成功。其实我不看电视，也不闲，甚至还有点忙，就是啥正事也不想干，就想把精力耗干，每隔一段时间就会来一次，啥也不想干。&lt;/p&gt;
&lt;/blockquote&gt;
</description><author>sfl05@163.com (ste)</author><guid isPermaLink="true">/archives/movie/</guid><pubDate>Fri, 27 Dec 2019 15:26:00 +0806</pubDate></item><item><title>科学订阅</title><link>/archives/rss/</link><description>&lt;p&gt;十年前是RSS盛行的年代，十年后已变成了微信公众号的天下。微信公众号给出了一种比较简便的内容发布方案，但是不够开放，算是进步和退步吧。2019年8、9月份的时候，因为需要跟踪上海发改委网站上关于奉贤海上风电项目竞价的情况，每天打开网站看一遍，真是太蛋疼了。于是想到了自己去烧制一个RSS。&lt;/p&gt;
&lt;p&gt;通过Google找到了Feed43，原理蛮简单，就是定时去读取网站内容，然后用类似正则的方式去匹配内容信息。试了一下就会了，制作了国家发改委、能源局等网站的RSS。
&lt;figure class="pswp-item" style="flex: 77.50533049040511" data-width="727" data-height="469"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/08a8289311e92cf80d9ed7bd1b4aac23.png" alt="Feed43" /&gt;&lt;figcaption&gt;Feed43&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后把这个feed丢到任何一个RSS阅读器即完成订阅。&lt;/p&gt;
&lt;p&gt;完结撒花。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;不过折腾总是不会这么快结束，弄完又想着在手机上也能方便得收到实时推送。记得在Telegram上有现成的bot可以用，找了一下果然发现有人提供了Rss bot。在对话框中告诉机器人要订阅的rss链接，机器人就会在有更新时推送消息给你，轻量而且方便。不过由于是第三方的bot，用了没几天就因服务器问题下线了，所以还是得自己动手。顺着这个bot找到了源码，是一个go语言写的开源机器人：&lt;a href="https://github.com/indes/flowerss-bot"&gt;flowerss-bot&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;为了跑这个服务，把家里吃灰的N1拿出来刷成了armbian。这台N1原本是刷了coreelec看片用，后来换Plex就用不上了。U盘刷完armbian后引导启动成功，再写入emmc。因为有&lt;a href="https://yuerblog.cc/2019/10/23/%E6%96%90%E8%AE%AFn1-%E5%AE%8C%E7%BE%8E%E5%88%B7%E6%9C%BAarmbian%E6%95%99%E7%A8%8B/"&gt;前人经验&lt;/a&gt;，dtb什么的都搞好了，所以这一步很顺利。
&lt;figure class="pswp-item" style="flex: 60.0" data-width="840" data-height="700"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/d39d45d456ce8f1e35cb565b4c975510.jpg" alt="armbian" /&gt;&lt;figcaption&gt;armbian&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后打算跑这个服务，但作者并没有提供arm版的程序，只能自己编译。先装了go，然后go build。
&lt;figure class="pswp-item" style="flex: 59.857142857142854" data-width="838" data-height="700"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/6203067fe124d3800c874248ca9d2dea.jpg" alt="flowerss" /&gt;&lt;figcaption&gt;flowerss&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;终于跑起来了，然后为了配置数据库的原因折腾了一下，最后发现不配置就可以运行。成功运行后，在Telegram上用/sub命令就可以订阅，效果如下：
&lt;figure class="pswp-item" style="flex: 23.984375" data-width="614" data-height="1280"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/1acb09eac4c94b668fe0f6040940cc41.jpg" alt="Telegram" /&gt;&lt;figcaption&gt;Telegram&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;订阅的源有新文章后会自动转存到Telegraph，如果源本身有原文的话看起来很方便。
&lt;figure class="pswp-item" style="flex: 23.984375" data-width="614" data-height="1280"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/bed5375884473ac5bf798bbfe05ec030.jpg" alt="原文" /&gt;&lt;figcaption&gt;原文&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;不过，还是想要群晖Docker那种可视化操作界面，于是继续装上Docker，并弄好图形界面。
&lt;figure class="pswp-item" style="flex: 109.93377483443709" data-width="996" data-height="453"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/09f523119662ab07e2f6f8048150b710.jpg" alt="Portainer" /&gt;&lt;figcaption&gt;Portainer&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;把flowerss的官方docker镜像拉下来发现，这个docker也不支持arm框架。于是继续在arm环境下运行dockerfile打包为docker镜像。这个命令是"docker build ."，我因为少打了一个"."，折腾了很久。&lt;/p&gt;
&lt;p&gt;这毕竟是我第一次打包docker镜像，也没有换源啥的，试了好多次，终于成功了。
&lt;figure class="pswp-item" style="flex: 60.0" data-width="840" data-height="700"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/632e687213fa9d18d59efdaf6a275b59.png" alt="Docker build" /&gt;&lt;figcaption&gt;Docker build&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后在Portaner里新建一个容器，成功跑起来了。这样就可以方便地查看日志以及远程访问了。
&lt;figure class="pswp-item" style="flex: 139.16666666666666" data-width="668" data-height="240"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/446525792d52f2949a04aff776f8b0e7.png" alt="Docker run" /&gt;&lt;figcaption&gt;Docker run&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;然而在看日志的时候发现，Feed43的源因为稳定性问题经常抓不到xml，而且其本身限制6小时抓一次，也不够及时，想着如果能自己部署一个Feed43服务就好了。在Github上搜索，还真的找到有人写了一个仿Feed43的&lt;a href="https://github.com/t812206236/rss_push2"&gt;程序&lt;/a&gt;，从其示例来看，基本和Feed43一致。但为了部署这个程序，我还得先学学java，再说吧。&lt;/p&gt;
&lt;p&gt;转而又找到一个叫RssHub的项目，可以在Docker里运行，跑在自己的服务器上更放心。
&lt;figure class="pswp-item" style="flex: 92.7797833935018" data-width="1028" data-height="554"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/73ba77ba02068034021b2a89616625e6.png" alt="RssHub" /&gt;&lt;figcaption&gt;RssHub&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不过这个工具就没有那么简便的可视化规则编辑界面了，需要用js语言自己写“路由”。我本想找一个路由规则模仿着写一个，但由于完全不懂js，始终不成功。最后还是要感谢毛总帮我写了规则，我在旁边看得一脸蒙蔽。
&lt;figure class="pswp-item" style="flex: 47.72393538913363" data-width="650" data-height="681"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/6573176ea9b6f38db1ea6e15af59fbac.png" alt="路由规则" /&gt;&lt;figcaption&gt;路由规则&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;毛总用一个中午的时间帮我实现了国家发改委网站的抓取，并在调试后优化。抓取的内容如图：
&lt;figure class="pswp-item" style="flex: 76.27986348122867" data-width="894" data-height="586"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/15e6b77b93fc121614250b380ef564e4.png" alt="feed" /&gt;&lt;figcaption&gt;feed&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;后来索性向毛总请教如何写路由，在漫长的试错之后，终于学会抓一些简单的博客类网站，比如一些的律所官网，学会之后还是很有成就感的，以后可以出去自称精通node.js了。
&lt;figure class="pswp-item" style="flex: 92.05298013245033" data-width="1390" data-height="755"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/d7df5d6563e74c7b5022e1e64f853691.png" alt="通商所" /&gt;&lt;figcaption&gt;通商所&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;RssHub还有一个很不错的路由是邮件收取，即通过imap协议收取邮箱中的邮件为RSS。我为此注册了一个Gmail邮箱专门订阅一些Newsletter，然后配置账号信息到RssHub的环境变量中。老牌RSS服务Inoreader在最近一次&lt;a href="https://sspai.com/post/58690"&gt;更新&lt;/a&gt;后，也支持了这个功能（收费功能）。
&lt;figure class="pswp-item" style="flex: 104.47019867549669" data-width="1262" data-height="604"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/19d3471877070a2c21c52262eb206b6d.png" alt="Newsletter" /&gt;&lt;figcaption&gt;Newsletter&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;转而又找到另一个工具huginn，同样可以直接在Docker里跑。这个工具有可视化界面，通过指定xpath路径实现内容抓取，编写规则和调试都简单很多。我试着写了规则，很快就抓到内容了。
&lt;figure class="pswp-item" style="flex: 74.32885906040268" data-width="1329" data-height="894"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/00238f3763824949fb4ca1554a0a606d.png" alt="huginn" /&gt;&lt;figcaption&gt;huginn&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然而，这里抓取的链接并不完整，还需要拼接上网址前缀；但又偏偏多了一个点，很难处理。于是还是得靠毛总帮忙，终于把那个点去掉了。
&lt;figure class="pswp-item" style="flex: 72.77960526315789" data-width="885" data-height="608"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/fb0dd868d8a2e90b243d0230f38a8d33.png" alt="agent rule" /&gt;&lt;figcaption&gt;agent rule&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这只是抓取文章列表的agent，还需要再另建一个抓取全文的agent和生成rss的agent，有点麻烦。暂先不管全文，单单只抓文章标题和链接还是比较简单的，套路差不多，很快我就把我常看的几个网站都搞定了。
&lt;figure class="pswp-item" style="flex: 166.48936170212767" data-width="1565" data-height="470"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/bd41583f6e1a29d97c797e57d6a3e5ba.png" alt="Agent flow" /&gt;&lt;figcaption&gt;Agent flow&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;用了一段时间发现，现在很多机构写的干货内容都不放网站而放在微信公众号里，而微信公众号的反爬策略非常严格，尝试用Rsshub里的几个路由抓取都不成功。放狗搜了一下了解到WeRSS这个付费服务，基本上公众号都有收录，界面也不错，35一年价格（8个公众号）也还可以，于是就买了。
&lt;figure class="pswp-item" style="flex: 115.57223264540337" data-width="1232" data-height="533"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/3909e887319c5170e869227b98219a1b.png" alt="WeRSS" /&gt;&lt;figcaption&gt;WeRSS&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;订阅之后发现公众号的通病是无关内容太多了，往往是一篇干货、一篇广告混在一起发，看起来很难受，必须得有过滤功能。于是又找到了一个自建RSS服务Tiny Tiny RSS，带有内容过滤功能。这个服务比较复杂，需要装好几个容器，不过很妙的是，有人提供了&lt;a href="https://github.com/HenryQW/Awesome-TTRSS/blob/master/docker-compose.yml"&gt;docker compose&lt;/a&gt;方案，一条命令就把这些全装好了。
&lt;figure class="pswp-item" style="flex: 119.05737704918033" data-width="1162" data-height="488"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/efee4339b1a915a635310838d271fe01.jpg" alt="Docker compose" /&gt;&lt;figcaption&gt;Docker compose&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;服务端装好后，网页端打开网址就能用，体验几乎和Google Reader一致，甚至有个插件可以模拟GR的快捷键；只不过这个是完全跑在自己服务器上的服务，不必担心Google大刀砍产品。
&lt;figure class="pswp-item" style="flex: 118.66391184573003" data-width="1723" data-height="726"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/a795f7e4e29119dc5ca1fc77d2bdd247.png" alt="TTRSS" /&gt;&lt;figcaption&gt;TTRSS&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;导入OMPL订阅后进设置里添加过滤规则，通过正则表达把一些不需要内容过滤掉。
&lt;figure class="pswp-item" style="flex: 95.7905544147844" data-width="933" data-height="487"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/1f8cd9445a547904b25d657c681f1db6.png" alt="filter" /&gt;&lt;figcaption&gt;filter&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;而且更妙的是，过滤之后的动作里，有一项功能是公开发布，即把筛选出的内容重新发布到一个整合的rss源里，把这个源共享出来就可以让别人也看到这些资讯了。
&lt;figure class="pswp-item" style="flex: 139.61864406779662" data-width="1318" data-height="472"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/b62c48cb2eb87ffff0efc4c1e61801ef.png" alt="Publish" /&gt;&lt;figcaption&gt;Publish&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;另一个意外之喜是里面集成了全文抓取的api，而且这个api也是开源的，跑在自己的服务器上，并在TTRSS里作为一个插件，针对不同的feed可以单独设置。
&lt;figure class="pswp-item" style="flex: 93.55828220858896" data-width="915" data-height="489"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/1399b7c44ffdd0154c495f2072a4686b.png" alt="Mercury" /&gt;&lt;figcaption&gt;Mercury&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;设置好全文抓取，对于没有提供全文的RSS也可以在阅读器里看到原文了，非常方便。这一功能与huginn或是Feed43是绝配，只要能抓到标题和原文链接丢给TTRSS就能生成原文，不能更好。效果如图：
&lt;figure class="pswp-item" style="flex: 64.41326530612245" data-width="1010" data-height="784"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/994f2bcb445f2053423b6237b2517042.png" alt="Fulltext" /&gt;&lt;figcaption&gt;Fulltext&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;TTRSS另提供了一个模仿Fever服务的插件，可以让一些支持Fever的第三方RSS阅读器变相支持TTRSS，思路很奇特。不过我选了一个原生支持TTRSS的客户端FeedMe，效果挺不错，这样就可以在手机上刷刷刷了。
&lt;figure class="pswp-item" style="flex: 23.984375" data-width="614" data-height="1280"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/674eeff8e3b735a05b182fb53e22df74.jpg" alt="FeedMe" /&gt;&lt;figcaption&gt;FeedMe&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;作为副产品，在Telegram上新建一个频道，并由flowerss bot来自动推送信息。有兴趣的朋友可以&lt;a href="https://t.me/china_policy"&gt;关注&lt;/a&gt;。
&lt;figure class="pswp-item" style="flex: 23.984375" data-width="614" data-height="1280"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/3a3e92aca4b13c38b5d57cd11d58d5ea.png" alt="频道" /&gt;&lt;figcaption&gt;频道&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这个rssbot实在是太好用，非常喜欢，出于稳定性考虑决定转移到群晖跑。然而由于官方镜像有点问题，没跑成功，于是用dockerhub在线编译了一个，然后在群晖里跑就没问题了。
&lt;figure class="pswp-item" style="flex: 106.08465608465609" data-width="1604" data-height="756"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/3548a891017192275a0ad47b952a5247.png" alt="dockerhub" /&gt;&lt;figcaption&gt;dockerhub&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;目前这套方案总结一下：源的抓取根据不同情形用到了huginn/Rsshub/WeRss/Feed43，然后经TTRSS筛选整合后发布出来，并通过flowerss订阅并推送到Telegram频道里。搞了这么多东西，只是为了在第一时间可以了解到能源行业最新政策动向，希望对工作会有帮助。现在每天一早打开TTRSS，就有信息扑面而来，这种感觉很好。
&lt;figure class="pswp-item" style="flex: 87.43169398907104" data-width="1280" data-height="732"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/7a63a8dd98685db3cedf92be60486edb.jpg" alt="信息流" /&gt;&lt;figcaption&gt;信息流&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这次折腾的附带体会是，Docker真是便利，部署服务和手机上装APP似的；开源社区真是牛逼，很多原本商业化的服务，现在也可以很简单地在自己的服务器上跑了；服务器也未必一定是个大家伙，像N1这样的小盒子，甚至是更小的pi，都可以当很不错的轻量服务器；未来的趋势是服务端私人化，自己搞定大部分服务的部署；即便不学编程，也要懂得如何部署、调试，一点点自学吧。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;update 2020.5.5&lt;/p&gt;
&lt;p&gt;换成了付费方案inoreader，50刀一年，带生成feed、过滤、邮件摘要、关键词高亮、动态搜索等功能，真香。
&lt;figure class="pswp-item" style="flex: 86.59305993690852" data-width="1647" data-height="951"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/43d594987ec889e22fdb4d4b0a632fa2.jpg" alt="Inoreader" /&gt;&lt;figcaption&gt;Inoreader&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;最吸引我的是Inoreader的动态搜索功能，可以从所有订阅源里检索相应关键词（或正则）而形成一个独立的栏目，这个栏目可以做成一个RSS源，还可以通过邮件摘要的方式分享给团队，非常实用。
&lt;figure class="pswp-item" style="flex: 105.0990099009901" data-width="2123" data-height="1010"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/221711b45fad798dfcd95ad553ae02c0.jpg" alt="动态搜索" /&gt;&lt;figcaption&gt;动态搜索&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Inoreader的另一个杀手锏功能是2020年4月更新的“Follow websites without RSS with Web feeds”，通过指定内容来生成RSS源，自动识别就很准，还可以通过指定xpath精确定位。这个功能比rsshub、feed43等傻瓜得多，简单好用。
&lt;figure class="pswp-item" style="flex: 81.93604148660329" data-width="1896" data-height="1157"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/a040be5f45743bc344ce9d520016a4a2.jpg" alt="网页抓取" /&gt;&lt;figcaption&gt;网页抓取&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;另一个不错的功能是规则自动化，类似ifttt，设定好条件后自动执行。比如我设定了star的文章里匹配正则的内容发送到我印象笔记的指定文件夹里，从而实现用Inoreader阅读，有用的文章星标，然后自动收集到印象笔记里进一步梳理。此外，ifttt也支持Inoreader服务，可以玩出更多花样。
&lt;figure class="pswp-item" style="flex: 85.38175046554935" data-width="917" data-height="537"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/c6c6efc216cfbf768c12813d93a4dd67.jpg" alt="规则自动化" /&gt;&lt;figcaption&gt;规则自动化&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;最后说一下Inoreader的阅读体验，网页和APP都很精美，我更喜欢用网页版，快捷键操作配合荧光标功能有助于速览。在科学上网的前提下，响应速度也比较理想。
&lt;figure class="pswp-item" style="flex: 60.677083333333336" data-width="932" data-height="768"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/977173e95317e59fd7a96a7a6eb31df6.png" alt="荧光标" /&gt;&lt;figcaption&gt;荧光标&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;update 2020.5.28&lt;/p&gt;
&lt;p&gt;非常喜欢RSSHub的功能及理念，决定去提Pull Request。重新Fork了一次以确保与主仓库一致，然后git clone到本地，新增若干路由后提交到自己的仓库。&lt;/p&gt;
&lt;p&gt;接下来就是提PR了，一提交就立刻触发机器人自动审核。
&lt;figure class="pswp-item" style="flex: 49.9609375" data-width="1279" data-height="1280"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/fe6f028c13c7c1890a15f8ffe0efa083.jpg" alt="检查" /&gt;&lt;figcaption&gt;检查&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;同时，Telegarm群里也自动有机器人提示有新PR。
&lt;figure class="pswp-item" style="flex: 65.81740976645435" data-width="620" data-height="471"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/1b675afd0f819d22f242a712104cd4cf.jpg" alt="通知" /&gt;&lt;figcaption&gt;通知&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;有多项检查，好紧张。等了几分钟，终于通过了。
&lt;figure class="pswp-item" style="flex: 47.2636815920398" data-width="950" data-height="1005"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/0ed7a56b31fc573ebbefd6db203fea66.jpg" alt="初审" /&gt;&lt;figcaption&gt;初审&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;竟然还解锁了一个成就！
&lt;figure class="pswp-item" style="flex: 58.372093023255815" data-width="1004" data-height="860"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/9625406c448c3e8605b9b002bd1243ca.jpg" alt="成就" /&gt;&lt;figcaption&gt;成就&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然而后面又经历了好多，先是作者要求增加缓存，后来又遇到主仓库更新后合并分支，以及我自己又新增了路由，又重新提交了PR，很折腾。开源社区要让大家都遵守一套规则，还是挺难的，即使有非常详细的文档，但要达成一个共识依然少不了一个磨合的过程。详见&lt;a href="https://github.com/DIYgod/RSSHub/pull/4872"&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;最终PR通过，还是很开心的。
&lt;figure class="pswp-item" style="flex: 103.50877192982456" data-width="944" data-height="456"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/30d09aaeef7f321ce65b2f37d9a4b162.png" alt="合并" /&gt;&lt;figcaption&gt;合并&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;顺便说一下，在写路由的过程中，用Visual Studio Code的Remote SSH插件远程到服务器，编写、运行都非常方便，本文也是在VSCode上写的。
&lt;figure class="pswp-item" style="flex: 81.75" data-width="1635" data-height="1000"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/0fceaa48f5d9fed35315a11d51621f74.png" alt="VSCode" /&gt;&lt;figcaption&gt;VSCode&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
</description><author>sfl05@163.com (ste)</author><guid isPermaLink="true">/archives/rss/</guid><pubDate>Sat, 04 Jan 2020 20:26:00 +0806</pubDate></item><item><title>科学听歌</title><link>/archives/music/</link><description>&lt;p&gt;大约从初中那会儿开始喜欢听歌，那个时候很淳朴（穷），买一盒磁带，放在步步高复读机里。那时最喜欢听谢霆锋，因为觉得他叛逆，粤语摇滚，歌也确实好听。那个时候因为整天听复读机，给家人造成了我英语听力很好的错觉，但其实只有粤语听力水平进步了。&lt;/p&gt;
&lt;p&gt;高中继续听谢霆锋，后来又增加听萧亚轩、周杰伦，都是当时极红的歌手，磁带都是同学间互相借。因为看到大家都用上了索尼、松下的随声听，卡带机为主，也有富家子弟用CD机、MD机的，于是缠着老妈要买一个。终于在某次考得不错之后，妈妈给买了。结果我太兴奋，上来就弄坏了，又拿去修，挺折腾。那时候买这么一个机器还是挺贵的，现在回想有些过份。&lt;/p&gt;
&lt;p&gt;大学时老爸给买了一个MP3，好像都没有牌子，但我还是听得很开心。去学校机房拷歌，下载各种乱七八糟的，晚上被窝里听，那个时期最喜欢张韶涵、陈绮贞。其实那个时候手机也可以听歌了，还可以通过Mzone下载，算是很先进了。开始知道音质好坏的差别，听过朋友的iRiver播放器+PX100耳机我都好喜欢，可惜买不起。自己用的，还是学校报亭里买的廉价耳机。&lt;/p&gt;
&lt;p&gt;研究生期间开始听少女时代，因为听不懂歌词，比较好集中精神。这个时期开始追求音质，开始物色好一点的耳机、耳放等，记得第一次海淘就是为了买Dragonfly DAC。等了一个月，天天刷物流，到手之后却没有什么特别的感觉。不过这个USB DAC在别的场景下发挥的作用，远超过其带来的音质，一个是之前用电热毯的时候听歌会有电流干扰，用了这个DAC后就不杂音了；另一个场景是晚上看电视声音大影响家人，想用耳机外接但家里的电视机没有耳机孔，最后通过USB口转接来实现，解决了这个问题。
&lt;figure class="pswp-item" style="flex: 90.0" data-width="450" data-height="250"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/394a6f3270849510184b7b8834d9543b.jpg" alt="Dragonfly" /&gt;&lt;figcaption&gt;Dragonfly&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;工作之后开始有点小钱了，买得更多，买过的耳机类产品我都记不清了，基本都是看评论好买来，听了一下没啥提升就二手卖了，纯粹是瞎折腾。后来我发现，因为我都是听K-POP，这类曲风其实很难听出音质差别。这期间还买过一个索尼的播放器，同样没啥音质提升，不过样子好看，我很喜欢。
&lt;figure class="pswp-item" style="flex: 66.60216718266254" data-width="1721" data-height="1292"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/4c3bf5f1290dac01db825f289466070a.jpg" alt="Sony A35" /&gt;&lt;figcaption&gt;Sony A35&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;后来索性按好看为主、便利为辅、兼顾参数的思路，去买产品，断断续续又买了Mojo耳放、HD650耳机、GR09耳塞等，都是不俗的产品，音质也确实有些提升，但也就那样，这算是真正对设备退烧了。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="900" data-height="675"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/aa7dee70d565be45949f3ccaff641dd8.png" alt="Mojo" /&gt;&lt;figcaption&gt;Mojo&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;然而我把设备想简单了，其实还有更多细分品类，比如降噪耳机以及音箱等。在选购时还是以好看为首要因素。&lt;/p&gt;
&lt;p&gt;降噪类买了Bose QC25、大法1000XM3、AirPods Pro，都是很好的产品。尤其是AirPods，这个产品开创了真无线耳机这个新品类，非常好用，我把一代、二代和Pro都买了，特别喜欢Pro，通勤降噪太有用了，只是戴时间长了耳朵会疼。家里则更多用大法，还专门买了个耳机架，和HD650摆一起。
&lt;figure class="pswp-item" style="flex: 66.66666666666667" data-width="4032" data-height="3024"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/0eeed65873e1cdc38485987909a9e5f9.jpg" alt="音乐角" /&gt;&lt;figcaption&gt;音乐角&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;音箱类呢，买了Sonos。起因是早年尝鲜买过一个Sonos Play1，听着喜欢又买了一个组双声道，然后又买了Sonos Beam，然后……直到买齐了全家桶。
&lt;figure class="pswp-item" style="flex: 50.0" data-width="900" data-height="900"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/eed8a7627ee81148ebc7d806d8f44e51.jpg" alt="Sonos全家桶" /&gt;&lt;figcaption&gt;Sonos全家桶&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Sonos的主要特点就是简单易用，可以在线播放Spotify、Tidal、网易等各种音源的歌（还可以语音控制）；电视打开的时候，就会自动切换到电视音源，5.1声道看Netflix不要太爽；还有很重要的一点是好看，放在沙发边上，很和谐。
&lt;figure class="pswp-item" style="flex: 37.5" data-width="3024" data-height="4032"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/19a3fd03b60b4957a745b2d567e6fab3.jpg" alt="Sonos sub" /&gt;&lt;figcaption&gt;Sonos sub&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;说到音源，这个也经历了一番折腾，尝试过自建曲库，放到NAS里，用Audio Station来管理，不太理想。改为用Plex/Jellyfin组织，也没啥意思，只能图个好看。
&lt;figure class="pswp-item" style="flex: 75.82938388625593" data-width="1280" data-height="844"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/28804cec72788887a4c160b18caf55ed.jpg" alt="Jellyfin Music" /&gt;&lt;figcaption&gt;Jellyfin Music&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;又试了树莓派刷Volumio等进行管理，科技感很强，实际用起来并不方便。
&lt;figure class="pswp-item" style="flex: 68.36461126005362" data-width="1020" data-height="746"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/6e8c1be14b43f379236435b45fc72644.jpg" alt="Volumio" /&gt;&lt;figcaption&gt;Volumio&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;moOde用起来体验相对好些，因为树莓派闲置，就跑了一个，偶尔听听。
&lt;figure class="pswp-item" style="flex: 107.63574660633485" data-width="1903" data-height="884"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/ce0303414363a077ba437fe973e78aad.png" alt="moOde" /&gt;&lt;figcaption&gt;moOde&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;最方便还是在线曲库，先后试了Spotify/Tidal/Youtube Music等，体验上还是Spotify最强，然而我为了用Spotify还上了Spoticheap这条贼船，交了一年的费用，没多久就翻车了，难受。
&lt;figure class="pswp-item" style="flex: 100.50761421319797" data-width="1188" data-height="591"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/27bf198de8f2ca077c124706152ff91e.png" alt="Spotify" /&gt;&lt;figcaption&gt;Spotify&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;最终选择了Youtube Music。其本身曲库就挺全，主流新歌基本同步都有，歌单和算法也不错。还有Youtube的巨大库作为后备，大量歌曲我更喜欢其演唱会版本、综艺版本，基本都可以找到。实在没有的资源，还可以自己找到mp3后传到Youtube上听。从而一个APP搞定所有，不必再纠结版权分散问题。这可能是听歌的最佳解决方案。
&lt;figure class="pswp-item" style="flex: 66.35977337110482" data-width="937" data-height="706"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/14f363f4b04521f64f61072d0f8f0808.png" alt="Youtube" /&gt;&lt;figcaption&gt;Youtube&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;最终回归本源还是在于听什么。年纪渐长，少女时代那种蹦蹦跳跳的再也不喜欢了，但是依然喜欢成员里独立发唱片的Taeyeon、Tiffany，每次出的歌还是质量很高。但是听多了会觉得心烦，慢慢开始听古典，常听巴赫&lt;a href="https://open.spotify.com/album/1aCpHSQE5ghxibsQ5gkBe0"&gt;哥德堡变奏&lt;/a&gt;，能够平复心情。&lt;/p&gt;
&lt;p&gt;所谓科学听歌，其实没有任何需要科学的成份，只要听自己喜欢的，就行了。&lt;/p&gt;
</description><author>sfl05@163.com (ste)</author><guid isPermaLink="true">/archives/music/</guid><pubDate>Wed, 22 Jan 2020 20:36:00 +0806</pubDate></item><item><title>科学下载</title><link>/archives/download/</link><description>&lt;p&gt;记得第一次下载是在表哥家玩电脑，听别人说可以在网上下载mp3而不需要买磁带了，觉得很神奇，就去找了一首歌下载试试。点了下载，就看一张张纸从一个球飘向一个文件夹，飘了约莫有个把小时还没有下载好。我很着急，因为担心下载歌曲出错，又不敢打CS，傻傻盯着屏幕等。
&lt;figure class="pswp-item" style="flex: 71.64750957854406" data-width="374" data-height="261"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/18f7b9cbc583fed63fc9201ef058c3e2.gif" alt="第一次下载" /&gt;&lt;figcaption&gt;第一次下载&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;实在等不住了就去找表哥，表哥说要用个工具下载，然后打开了一个软件，点下载，瞬间就下载好了。我觉得下载软件真是太神奇了，大大节省了时间。当时下载了什么歌曲已经忘记，但还记得那个软件，叫作Flashget。多年以后Flashget的作者似乎因为沉迷魔兽，没有再更新了，这软件也就废了。后来就有了迅雷，也挺好用，尤其是下载完成时叮的那一声，听着特别爽。只是迅雷这个软件越来越臃肿，下载速度也越来越慢，各种会员层出不穷，以至于最终变成卖理财产品。不知从什么时候起经常下载到99%就不动了，也就不再用了。当时还有个叫verycd的网站资源非常多，需要用电驴软件来下载。ed2k协议的机制不太清楚，应该也是类似BT吧，软件默认配置有一套比较合理的上传和下载机制，然而这种平衡被迅雷等吸血软件打破了，只下载不上传，把这个生态都搞坏了。后来PT应运而生，我听说养PT很麻烦，还要考核，就懒得研究了。&lt;/p&gt;
&lt;p&gt;大学期间身处教育网，有许多教育网资源，比如各系都有FTP，普遍提供一些电影资源，下载很快。又比如P大流行的Maze，T大流行的Corsair，下载也都很快，资源更是五花八门。这两个软件属于P2P下载了，经常有同学一不小心把自己的个人文档分享出去了，然后就出名了；也有同学劝告我让我别用，说这个软件伤硬盘。我那个时候觉得这么多资源唾手可得，很幸福，不管有没有用，都先下载下来看看。电脑装不下了，就买了光盘，刻盘了存起来。后来离校时搬不走，全丢了。&lt;/p&gt;
&lt;p&gt;毕业后租房，离开了教育网，买了一个小米路由器硬盘版，里面有个功能就是自动追剧，一有更新就会自动下载，非常牛逼。这让我知道原来下载并不一定要开电脑，而且竟然可以这么自动化。下载完成后直接samba连接观看，效果非常好。
&lt;figure class="pswp-item" style="flex: 39.64497041420118" data-width="670" data-height="845"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/8423d75c8e910fb4d4ce5e34242e1cdc.png" alt="自动追剧" /&gt;&lt;figcaption&gt;自动追剧&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后网盘慢慢开始流行，早期有rayfile、纳米盘之类的，以及各种国外网盘，普遍速度不快，而且在下载前要先等那么30秒广告，体验很不好。后来百度云出来了，空间大、速度快，瞬间就成了中文资源分享的首选途径。好景不长，百度开始推限速政策，速度慢到你怀疑人生，只有买会员才行；后来连普通会员都不行了，必须超级会员才能加速。这波操作真的劝退，无奈至今百度云仍是国内最主流的资源分享渠道，甚至客户给我们发资料，也普遍用百度云，搞得我不得不去买会员。&lt;/p&gt;
&lt;p&gt;除了百度云，国内还有一家网盘公司115十分神奇。在其它下载软件严格查封涉黄资源的时候，115一直致力于分享大姐姐而屹立不倒，会员费越来越高，让人不禁怀疑其后台有多硬。撇开大姐姐资源不说，115是个很好的云盘工具，主流资源基本秒离线，然后可以原画在线播放，速度流畅。还有个不错的电视端app，在电视上看剧看电影很方便。然而太贵，买过一年就不用了。还有就是腾迅微云，属于后起之秀，依靠其腾讯云服务资源，服务也很不错，但对我来说并没有什么应用场景，并不支持群晖cloudsync。&lt;/p&gt;
&lt;p&gt;然而国内这些云服务都有很严格的审查机制，一般来说涉黄、涉版权以及政治敏感的内容都活不过第二天。而国外的网盘如Google Drive怎似乎没有任何主动审查机制，除非有人举报，于是一时间大为流行，成为国内翻墙玩家最喜欢的资源分享渠道，在Telegram上有大量的频道、群组都是通过下载资源到vps后rclone到GD进行资源分享的。我用GD下载非常多，主要在于群晖上有个很好用的Cloudsync套件，支持同步下载GD，手机上就可以操作。而且保存别人分享的GD资源并不占用自己的GD容量，这一点很方便，保存到自己网盘后即便不下载，通过网页或是Kodi插件在线看剧也是非常方便的。&lt;/p&gt;
&lt;p&gt;然而GD还是有两个问题，一个是需要翻墙，而且是跑下载所以特别费流量；别一个是其本身有下载量限制，下载的人多了就不允许再下载了，只能通过在自己的盘上创建副本才能突破这个限制。这个机制搞得我很不爽，即使我有无限空间的GD，也不喜欢这一套操作。不过GD依然是相对方便的下载资源方式，得益于TG上丰富的资源分享，以及Google爸爸的慷慨。&lt;/p&gt;
&lt;p&gt;某次偶然机会把家里的一台N1刷成了小钢炮下载系统，已集成了多种下载及配套工具，被广泛用来下载PT。我从而正式去了解了PT机制，强调下载之后保持分享，并对分享率等进行考核，从而维持生态平衡，理念还是很科学的。大部分PT站都是邀请注册的，随便找了一个站（MoeCat）捐了一个账号，资源挺多，就开始跑下载了。N1上插了一块从xbox上拆下来的500G硬盘，坏了也不心疼。只要保持做种，考核还是很容易过的。
&lt;figure class="pswp-item" style="flex: 126.04166666666667" data-width="363" data-height="144"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/308a7a33b1634244f16e45483677d952.png" alt="考核" /&gt;&lt;figcaption&gt;考核&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;原本以为PT不过是在BT上加了tracker以督促下载者做种，进了PT站之后才发现原来还有rss下载这种科学的方式。可以在网站上通过关键词及其它筛选方式生成rss链接，将该链接丢进支持rss下载的软件里就能自动下载更新。我在N1上用Docker跑了个Flexget，有非常强大的过滤机制，种子下载后自动调用Transmission进行下载，然后在达到一定的分享率后停止做种。如果说保持分享是PT的精神，那下载自动化大约是PT的最大优点，另外其私密性有助于在一定程上避免资源被审查。
&lt;figure class="pswp-item" style="flex: 168.01470588235293" data-width="914" data-height="272"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/0832b5884fea24c0c7e1f321fb6f9252.jpg" alt="订阅式追剧" /&gt;&lt;figcaption&gt;订阅式追剧&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;除了订阅式下载外，更常用的是主动下载，即想看什么电影就去搜索，然后下载。因为单个PT站资源有限，所以通常会混多个PT站以获得尽可能全面的资源，这时就会遇到一个问题，你必须逐一打开各PT站的网页然后搜索，很不科学。这种属于非常典型的不科学但可以解决的问题，自然是有解决方案的：有个PT助手的浏览器插件，很好地解决了这个问题。首先你要把你混的PT站都填进去，然后每个站的上传下载信息就都有了。
&lt;figure class="pswp-item" style="flex: 96.09609609609609" data-width="1280" data-height="666"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/4c898b6ad2efec1926409a79d694aef7.jpg" alt="列表" /&gt;&lt;figcaption&gt;列表&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后，你可以直接在插件里搜索，会列出所有站的搜索结果，并可以一键发送到下载服务器开始下载，非常方便。
&lt;figure class="pswp-item" style="flex: 52.33990147783251" data-width="1275" data-height="1218"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/07dcf5ca1c9508baa382a6893d4b6905.jpg" alt="搜索" /&gt;&lt;figcaption&gt;搜索&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;PT助手唯一不方便的是每台电脑上都要配置下比较麻烦。后来我通过MoeCat的官窑注册了PTer（猫站），这个站算是比较大的站了，资源好多，基本上可以一站搞定，省心。&lt;/p&gt;
&lt;p&gt;不过PT容易催生松鼠症，看到有好的资源就想下载下来存起来，比如我渐渐把四盘位的群晖存满了，下载了各种电影、电视资源，形成了一个巨大的媒体库，花了很多时间整理，却并没有时间看，得不偿失。于是某天做了一次清理，NAS上仅保留部分优质经典资源，其余全删了。依旧用N1带一块500G按需下载，也不用媒体管理器刮削，直接看，看完就删，除非特别有保存价值。&lt;/p&gt;
&lt;p&gt;不过很快又自己打脸了，买了台蜗牛星际，整个重建了媒体库，洗版好多老的资源，又下载了一堆。值得一提是这台蜗牛，改了静音，比原来的那台群晖更安静，放客厅完全无感。整了四个盘，全是basic，放弃组raid。一块ssd跑的是系统和docker一些服务；一块1T老盘存文档、图片并全数备份到onedrive上；一块新买的4T蓝盘存电影和剧，坏了就重新下载不心疼；一块新买的1T紫盘用于监控存储（群晖的监控系统好强大）。这样感觉也挺合理。
&lt;figure class="pswp-item" style="flex: 175.71022727272728" data-width="1237" data-height="352"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/3e14ecfcee6aee07012f46d11b96e2fc.png" alt="存储" /&gt;&lt;figcaption&gt;存储&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;原本这已经是一个流媒体非常发达的时代了，按理本不应该再需要下载。然而国内流媒体版权相对分散，国外流媒体观看不易，导致下载还是一种不可缺少的方式。在网络政策越来越收紧的背景下，甚至可能进一步倒退，回到那个在中关村卖光盘的时代，迎面走来一位大婶，冲你说，“大兄弟，要盘不？”&lt;/p&gt;
</description><author>sfl05@163.com (ste)</author><guid isPermaLink="true">/archives/download/</guid><pubDate>Mon, 23 Mar 2020 19:50:00 +0806</pubDate></item><item><title>科学整合</title><link>/archives/unraid/</link><description>&lt;p&gt;家里一直是一台群晖加一台N1的组合，前者负责存储并跑一些服务，后者跑PT并跑了一个OP旁路，挺科学，也很稳定。然而不知从什么时候起，反复听到Unraid这个系统，心里开始痒痒也想要搞All in one。但我其实不太确定是否可靠，打算体验一下unraid先，于是买了一台J4125的小主机，8+256的配置，计划就是当个小服务器跑跑；最不济，刷成软路由也行。
&lt;figure class="pswp-item" style="flex: 50.0" data-width="800" data-height="800"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/c433088cf93315bd0e2cb4c307a49afe.jpg" alt="GK55" /&gt;&lt;figcaption&gt;GK55&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;很小巧的机子，unraid安装也非常简单，单纯把文件拷进U盘即可，然后插U盘启动即可，很快就进入了后台管理页面。
&lt;figure class="pswp-item" style="flex: 87.68518518518519" data-width="1894" data-height="1080"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/40342d6cb2446c5fac3c387beb5251f9.png" alt="dashboard" /&gt;&lt;figcaption&gt;dashboard&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;上手后发现硬盘组阵列也很简单，而且很自由，设置也很丰富，比如服务类的存储都限定在固态上，而把媒体类限定在机械上，无访问的情况下硬盘自动休眠，最大程度上保护硬盘及省电。这大约是Unraid相较于群晖类跑raid模式的最大优势吧，也是其名字的由来。实测如果某块硬盘损坏，即使没有校验盘，也只是损失这块硬盘上的内容，于其它资料没关系。不过有的时候丢失部分资料的感觉比丢失全部更让人难受，玩unraid还是得上校验才好。上校验又会涉及读写速度慢的问题，最好配缓存，主板最好有nvme口。我这台暂只一块单SSD用着，没有大文件读写，一般也不容易坏。
&lt;figure class="pswp-item" style="flex: 38.14055636896047" data-width="521" data-height="683"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/aee1bb9c2b819ed10f1dc616d3dc3a24.png" alt="文件逻辑" /&gt;&lt;figcaption&gt;文件逻辑&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;阵列启动后，先开始玩docker，有个app市场，本质上是docker模板以及一些plugins的合集，用起来很方便。市场上没有的，就按传统方法装docker。docker装好后管理起来非常方便，随意编辑修改，一键更新，操作更人性化，特别适合我这种docker党。这个要打满分。
&lt;figure class="pswp-item" style="flex: 54.41014332965821" data-width="987" data-height="907"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/0b1d55d6a0c43a7171ad5cc2e9b621d4.png" alt="Docker更新" /&gt;&lt;figcaption&gt;Docker更新&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;插件的更新也是一样，这些插件都挺实用的，不过能集成到系统就更好了，比如APP市场、存储挂载等，内置更合理。
&lt;figure class="pswp-item" style="flex: 147.87735849056602" data-width="1881" data-height="636"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/003f7fff24ea7e2abb2352fc506f5fcb.png" alt="插件更新" /&gt;&lt;figcaption&gt;插件更新&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;为了能远程调试rsshub，需要git及相应环境。偷懒直接在底层跑，用在Nerd Tools里一键安装了git，并把自己的仓库拉下来。然后跑了一个rsshub的docker，并把路径指好，就算是部署好了调试环境：vscode远程连过去编写路由，然后通过重启docker并看log的方式来调试。然而重启后发现root目录下的ssh、git设置等都没了，因为是U盘引导启动的原因。所以还是得跑个虚拟机，装了ubuntu 20.04，还挺方便。配置好git等，专门用来调试rsshub。
&lt;figure class="pswp-item" style="flex: 67.25714285714285" data-width="1177" data-height="875"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/c2a9444245db41a1077719b6a97ec7c1.png" alt="Ubuntu" /&gt;&lt;figcaption&gt;Ubuntu&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;J4125的集显HD600据说挺强，于是用docker安装了一个PLEX，并挂载了群晖的一个媒体盘作为其媒体库。由于themoviedb等数据库都被墙了，所以必须有前置的科学上网。事实上，unraid使用最好有前置代理，否则app市场都打不开，docker部署也麻烦。不过实测走代理后，本地PLEX与PLEX服务器连接存在问题，我在openclash上设置了DOMAIN-KEYWORD,PLEX,DIRECT，避免向PLEX服务器错误汇报代理的IP。设置好后连接正常，影片及剧的信息都识别很准，即便不观影，光看看海报墙也是舒服的。
&lt;figure class="pswp-item" style="flex: 95.34883720930233" data-width="1558" data-height="817"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/aa31587f1a05ed97612efba1db187f8f.png" alt="PLEX" /&gt;&lt;figcaption&gt;PLEX&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然而J4125的硬解我一直有问题，查了才知道是Intel的BUG还没修。实测CPU软解的话，CPU爆炸，勉强也能播放。为避免转码，可以把烧录字幕的选项设置为仅图像，这样可以避免对ASS字幕转码，降低CPU负担，但ASS的特效也就没了，成为普普通通的字幕。还是不甘心，在网上找了好多好多资料，最终终于解决，要求：1、指定i965驱动；2、关闭VT-d；后者是无意间在smzdm的评论中找到的方案，这是一个神奇的网站。&lt;/p&gt;
&lt;p&gt;实现硬解之后，实测在播放前还是有几秒的等待时间，但播放过程中是流畅无卡顿的。总体来说，其观影效果很棒，APP胜Jellyfin等十余条街，比Kodi的体验也好很多。为了PLEX硬解，这块CPU真是太心累了，早知道直接上i3 8100之类就会简单很多，忧伤。但是，因为关闭了VT-d，CPU的直通功能也就没了，IOMMU也显示禁用，如果想要直通网卡等进行软路由设定的，就必须有个取舍。我纠结了半天，还是打开了VT-d。
&lt;figure class="pswp-item" style="flex: 176.39664804469274" data-width="1263" data-height="358"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/44a40d89cc55d45877f255a0f76622fa.png" alt="硬解" /&gt;&lt;figcaption&gt;硬解&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;打开直通后，直通了一个网口给openwrt虚拟机作为wan，并把br0和bond0作为lan，从而实现op拨号并跑科学上网，unraid本机以及lan口接出来的ap均能科学上网。实测在op关掉的情况下，还是可以通过lan访问到unraid进行管理，从而方便调试管理，即便玩炸了也不怕。原本我还给unraid配了一个前置的路由器R2S，这下连这个也省了。
&lt;figure class="pswp-item" style="flex: 68.67298578199052" data-width="1449" data-height="1055"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/29f78e47432638a91558856f574813a9.png" alt="网口直通" /&gt;&lt;figcaption&gt;网口直通&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;尝试在家里的黑群上跑PLEX，由于J1900这块CPU太弱鸡，转码基本上都是转圈，暂通过在CoreElec上跑PLEX插件后直接播放，并设置插件自启动。实测整体启动时间和我小米电视的启动时间相当，体验还可以。什么时候安卓上有个Infuse就好了，PLEX真是个让人纠结的东西，但我试了一圈，对于个人影音管理，还是这个最靠谱。&lt;/p&gt;
&lt;p&gt;最终换了一台i3 8100T（带HD630集显）的机器，6SATA+nvme+双网口的主板，16G内存，蜗牛机箱，配置已然超过我的台式机了。
&lt;figure class="pswp-item" style="flex: 75.0" data-width="768" data-height="512"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/cd22b0321ba864b9db5ddfdee6e4ded0.jpg" alt="机箱" /&gt;&lt;figcaption&gt;机箱&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;跑unraid后可以把老的小容量闲置硬盘都利用起来，组阵列。阵列之外，另有一块500G的nvme当缓存，一块新买的1T的ssd（三星evo860，600T写入）直通给群晖用。
&lt;figure class="pswp-item" style="flex: 47.9746835443038" data-width="758" data-height="790"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/075bfe025deaf3ba81b8d2b2e6abde92.jpg" alt="硬盘阵列" /&gt;&lt;figcaption&gt;硬盘阵列&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;跑了群晖虚拟机，主要用到Drive、Moments、Cloudsync等套件，把家庭照片、个人资料等文件存里面，同时跑onedrive云备份，确保万无一失。另跑了一个Openwrt虚拟机，并直通了一个网口进去，当旁路由用，完全可视化操作，比实体软路由刷固件简单多了。&lt;/p&gt;
&lt;p&gt;把Docker、虚拟机等文件夹全部放到缓存，访问快一些，但是没有保护，不过一般也不会丢；以后有机会可以改成raid1。影音媒体等不怎么访问的数据文件存在阵列上，有校验保护。因为unraid支持硬盘无访问自动休眠，对于只有晚上回家偶尔看看电影的用途来说（这其实是大部分家庭的使用场景），比较省电，也比较省硬盘。
&lt;figure class="pswp-item" style="flex: 70.67307692307692" data-width="882" data-height="624"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/26aa6789baae1200abb9cadf2dbc3abc.jpg" alt="休眠" /&gt;&lt;figcaption&gt;休眠&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;跑PLEX后终于可以实现流畅的硬解，播放前缓冲约5秒左右，体验很好。实测在全盘待机情况下功耗约27W，PLEX硬解跑起来的时候约50W。
&lt;figure class="pswp-item" style="flex: 64.321608040201" data-width="1280" data-height="995"&gt;&lt;img src="https://cdn.jsdelivr.net/gh/snipersteve/Blog@gh-pages/archives/assets/18504e6b27bcc70ed5b3cad1aef7a270.jpg" alt="功耗" /&gt;&lt;figcaption&gt;功耗&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;PLEX在1.20.4.3517版更新后，终于提供了为电视剧库指定用tmdb获取信息的功能，而非原先默认的tvdb。themoviedb听起来是针对电影的，实际上电视剧信息也很全，比tvdb更好，基本可以全自动识别不用纠正。PLEX相较于Jellyfin的一大优势就是刮削更好用，即便都是指向同样的数据库。在没有代理的情况下，可以通过改hosts来解决tmdb无法访问的问题，速度也还可以。&lt;/p&gt;
&lt;p&gt;这是一台All in one的机器，理论上可以把所有服务跑在这台机器上，但我还是选择把rss相关服务跑在GK55那台机器上，国际访问起来更方便一些。通过这一波整合，淘汰了家里用来跑存储的蜗牛星际、用来跑下载及旁路的N1（小钢炮&amp;amp;Openwrt）以及用来当播放器的两台N1（CoreElec），实现了心理上的舒适。&lt;/p&gt;
</description><author>sfl05@163.com (ste)</author><guid isPermaLink="true">/archives/unraid/</guid><pubDate>Tue, 03 Nov 2020 14:26:00 +0806</pubDate></item></channel></rss>